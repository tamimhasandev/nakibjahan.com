jQuery(function(c){"use strict";var t={init:function(){c(document).ready(this.show_and_hide_panels),c("body").on("click",".wcpbc_price_method",this.price_method_change),c("body").on("click",'.wcpbc_sale_price_dates[type="radio"]',this.sale_dates_change),c("body").on("keyup",".wcpbc_sale_price[type=text]",this.sale_price_keyup),c("body").on("change",".wcpbc_sale_price[type=text]",this.sale_price_change),c(document.body).on("woocommerce_variations_added",this.show_and_hide_panels),c("#woocommerce-product-data").on("woocommerce_variations_loaded",this.show_and_hide_panels),c(document.body).on("wc_price_based_country_show_and_hide_panels",this.show_and_hide_panels),c(document).ready(this.product_type_not_supported_alert),c(document.body).on("woocommerce-product-type-change",this.product_type_not_supported_alert)},show_and_hide_panels:function(){c('.wcpbc_price_method[type="radio"][value="manual"]').each(function(){var e=c(this).closest(".wcpbc_pricing"),o=c(this).prop("checked");t.show_hide_price_controls(e,o)})},show_hide_price_controls:function(e,o){var t=o&&!e.find('.wcpbc_sale_price_dates[type="radio"][value="default"]').first().prop("checked");e.find(".wcpbc_show_if_manual").toggle(o),e.find(".wcpbc_hide_if_sale_dates_default").toggle(t),c(document.body).trigger("wc_price_based_country_manual_price_"+(o?"show":"hide"),[e])},price_method_change:function(){var e=c(this).closest(".wcpbc_pricing"),o="manual"==c(this).val();t.show_hide_price_controls(e,o)},sale_dates_change:function(){c(this).closest(".wcpbc_pricing").find(".wcpbc_hide_if_sale_dates_default").toggle("default"!==c(this).val())},is_sale_bigger_than_regular:function(e){var o=c("#"+e.attr("id").replace("_sale","_regular")),e=parseFloat(accounting.unformat(e.val(),woocommerce_admin.mon_decimal_point));return parseFloat(accounting.unformat(o.val(),woocommerce_admin.mon_decimal_point))<=e},sale_price_keyup:function(){t.is_sale_bigger_than_regular(c(this))?c(document.body).triggerHandler("wc_add_error_tip",[c(this),"i18n_sale_less_than_regular_error"]):c(document.body).triggerHandler("wc_remove_error_tip",[c(this),"i18n_sale_less_than_regular_error"])},sale_price_change:function(){t.is_sale_bigger_than_regular(c(this))&&c(this).val("")},product_type_not_supported_alert:function(){var e=c("select#product-type").val();c("#general_product_data .wc-price-based-country-upgrade-notice.wc-pbc-show-if-not-supported").hide(),c("#general_product_data .wc-price-based-country-upgrade-notice.wc-pbc-show-if-not-supported.product-type-"+e).toggle(c.inArray(e,wcpbc_admin_params.product_type_supported)<0),c("#general_product_data .wc-price-based-country-upgrade-notice.wc-pbc-show-if-third-party").hide(),c("#general_product_data .wc-price-based-country-upgrade-notice.wc-pbc-show-if-third-party.product-type-"+e).toggle(0<=c.inArray(e,wcpbc_admin_params.product_type_third_party))}},e={init:function(){this.discount_type_change(),c("#general_coupon_data #discount_type").on("change",this.discount_type_change)},discount_type_change:function(){var e="fixed_cart"==c("#discount_type").val()||"fixed_product"==c("#discount_type").val();c("#general_coupon_data #zone_pricing_type").closest("p").toggle(e)}},o={init:function(){c("select.variation_actions").on("wcpbc_variable_bulk_edit_popup",this.upgrade_pro_popup),c(document).ready(this.show_and_hide_pro_notice),c(document).ready(this.move_integration_upgrade_notices),c(document.body).on("woocommerce-product-type-change",this.show_and_hide_pro_notice),c(document.body).on("woocommerce_variations_added",this.show_and_hide_pro_notice),c("#woocommerce-product-data").on("woocommerce_variations_loaded",this.show_and_hide_pro_notice),c("input#_nyp").on("change",this.show_hide_nyp_notice),c("#woocommerce-product-data").on("change",".checkbox.variation_is_nyp",this.show_hide_nyp_notice)},upgrade_pro_popup:function(e){e.preventDefault();e=c("#variable_product_options").find(".woocommerce_variations .variation-needs-update");0<e.length&&e.removeClass("variation-needs-update"),c(document.body).trigger("wcpbc_show_upgrade_pro_popup")},move_integration_upgrade_notices:function(){0<c(".wc-price-based-country-upgrade-germanized-integration").length&&(c("#general_product_data .wc-price-based-country-upgrade-germanized-integration").insertAfter("#general_product_data p._unit_price_sale_field"),c(document.body).on("woocommerce_variations_added",o.move_germanized_variation_divs),c("#woocommerce-product-data").on("woocommerce_variations_loaded",o.move_germanized_variation_divs)),0<c(".wc-price-based-country-upgrade-wc-smart-coupons-integration").length&&c("#general_product_data .wc-price-based-country-upgrade-wc-smart-coupons-integration").insertAfter("#sc-field")},move_germanized_variation_divs:function(){c(".woocommerce_variation.wc-metabox .variable_gzd_ts_labels").each(function(){var e=c(this).closest(".woocommerce_variation.wc-metabox"),o=(e.find(".wcpbc_pricing").insertAfter(c(this)),e.find(".variable_pricing_unit"));e.find(".wc-price-based-country-upgrade-germanized-integration").insertAfter(o)})},show_and_hide_pro_notice:function(){var e=c("select#product-type").val();c(".wc-price-based-country-upgrade-notice:not(.show)").hide(),c(".wc-price-based-country-upgrade-notice.wc-pbc-show-if-"+e).show(),c("#general_product_data .wc-price-based-country-upgrade-notice.wc-price-based-country-upgrade-product-variable-subscription").hide(),c("#general_product_data .wc-price-based-country-upgrade-notice.wc-pbc-show-if-booking").hide(),o.show_hide_nyp_notice()},show_hide_nyp_notice:function(){var e,o;c("input#_nyp").length<1||(e=c("input#_nyp").prop("checked"),o=c("select#product-type").val(),c(".wcpbc_pricing.hide_if_nyp-wcpbc").toggle(!e),c(".wc-price-based-country-upgrade-notice.wc-pbc-show-if-nyp-wcpbc").toggle(e),c(".checkbox.variation_is_nyp").each(function(){var e=c(this).prop("checked");c(this).closest(".woocommerce_variable_attributes.wc-metabox-content").find(".wc-price-based-country-upgrade-notice.wc-pbc-show-if-nyp-wcpbc").toggle(e),c(this).closest(".woocommerce_variable_attributes.wc-metabox-content").find(".wcpbc_pricing.hide_if_nyp-wcpbc").toggle(!e)}),e||c(".wcpbc_pricing.hide_if_"+o).hide())}};"1"!==wcpbc_admin_params.is_pro&&o.init(),t.init(),e.init()});